(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1315:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return J});a(767);var n,o=a(769),r=a.n(o),i=(a(878),a(879)),l=a.n(i),c=(a(349),a(234)),s=a.n(c),u=(a(171),a(49)),m=a.n(u),p=(a(339),a(38)),d=a.n(p),g=(a(749),a(750)),h=a.n(g),b=a(14),f=a(15),y=a(24),v=a(22),E=a(23),C=a(129),I=(a(112),a(113)),S=a.n(I),O=(a(796),a(797)),j=a.n(O),w=(a(338),a(784)),k=a.n(w),T=(a(78),a(31)),x=a.n(T),M=a(0),q=a.n(M),z=a(69),N=a(219),U=a(226),B=a(10),D=a.n(B),L=x.a.Header,R=x.a.Content,A=k.a.TextArea,H=function(e){var t=e.onChange,a=e.onSubmit,n=e.submitting,o=e.value;return q.a.createElement("div",null,q.a.createElement(j.a.Item,null,q.a.createElement(A,{rows:4,onChange:t,value:o})),q.a.createElement(j.a.Item,null,q.a.createElement(S.a,{htmlType:"submit",loading:n,onClick:a,type:"primary",style:{float:"right"}},"\u6dfb\u52a0\u7559\u8a00")))},J=Object(z.connect)(function(e){return{topicIntro:e.topicIntro,loading:e.loading.models.topicIntro}})(n=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={visible:!1,comments:[],submitting:!1,value:"",isMobile:!1},a.componentDidMount=function(){a.getOneComment(),a.judgeIsMobile()},a.judgeIsMobile=function(){a.unregisterEnquire=Object(U.a)(function(e){a.state.isMobile!==e&&a.setState({isMobile:e})})},a.getOneComment=function(){a.props.dispatch({type:"topicIntro/@request",afterResponse:function(e){return e.data},payload:{valueField:"topicDetail",method:"GET",url:"http://192.168.43.191:8010/api/topic/queryTopic/".concat(D.a.getStore("topicId"))}})},a.addComment=function(){a.props.dispatch({type:"topicIntro/@request",afterResponse:function(e){"success"===e.icon?h.a.success(e.message):h.a.erro(e.message)},payload:{method:"POST",url:"http://192.168.43.191:8010/api/reply/publicReply",data:{replyTopicId:D.a.getStore("topicId"),replyUserId:D.a.getStore("user").userId,replyContent:a.state.value}}})},a.goBack=function(){a.history.push(D.a.getStore("beforeUrl"))},a.replyComment=function(){a.setState({visible:!0})},a.closeComment=function(){a.setState({visible:!1})},a.handleSubmit=function(){a.state.value&&(a.setState({submitting:!0}),a.addComment(),setTimeout(function(){a.setState({submitting:!1,value:""}),a.getOneComment(),a.closeComment(Object(C.a)(Object(C.a)(a)))},1e3))},a.handleChange=function(e){a.setState({value:e.target.value})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state,t=e.visible,a=(e.comments,e.submitting),n=e.value,o=e.isMobile,i=this.props.topicIntro.topicDetail;return q.a.createElement(x.a,{className:"full-layout topic-intro-page"},q.a.createElement(L,{style:{color:"black"}},q.a.createElement(m.a,{theme:"dark",mode:"horizontal",style:{lineHeight:"64px"}},q.a.createElement(m.a.Item,null,q.a.createElement("div",{onClick:this.goBack},q.a.createElement(d.a,{type:"arrow-left",style:o?{color:"white",fontSize:"25px"}:{color:"white",fontSize:"25px",marginLeft:"50px",marginTop:"10px"}}),"\u8fd4\u56de\u8bc4\u8bba\u4e3b\u9875")))),q.a.createElement(R,{style:{padding:"20px 50px"}},q.a.createElement(l.a,{className:"comment-topic",actions:[q.a.createElement("div",{onClick:this.replyComment},"\u56de\u590d")],author:i.topicUserId,avatar:q.a.createElement(s.a,{src:i.userImg}),content:i.topicContent,datetime:i.topicCreatedTime},q.a.createElement("div",null,q.a.createElement(r.a,{dataSource:i.replyList,itemLayout:"horizontal",className:"comment-list",renderItem:function(e){return q.a.createElement(l.a,{author:e.replyUserId,avatar:q.a.createElement(s.a,{src:D.a.getStore("user").userImg}),content:e.replyContent,datetime:e.replyCreatedTime,style:{borderBottom:"1px solid #e2e2e2"}})}}),t&&q.a.createElement(l.a,{avatar:q.a.createElement(s.a,{src:D.a.getStore("user").userImg,alt:D.a.getStore("user").userName}),content:q.a.createElement(H,{onChange:this.handleChange,onSubmit:this.handleSubmit,submitting:a,value:n})})))))}}]),t}(N.a))||n}}]);
//# sourceMappingURL=32.e14d6021.chunk.js.map