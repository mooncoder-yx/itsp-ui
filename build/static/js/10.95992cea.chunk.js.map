{"version":3,"sources":["decorator/resizeMe.js","components/WaterFall/index.js","components/WaterFall/WaterFall.js","components/LazyLoad/LazyLoad.js","components/LazyLoad/index.js","routes/Course/Lessons/Summary/components/index.js"],"names":["debounce","$$","throttle","defaultConfig","refreshRate","refreshMode","resizeMe","config","arguments","length","undefined","refreshFunc","WrappedComponent","_PureComponent","_class2","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onResize","element","parentNode","_getComputedStyle","getComputedStyle","width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","size","parseInt","setState","onResizeStrategy","state","position","inherits","createClass","key","value","resizeSensor","ResizeSensor","detach","_this2","_this$state","_this$props","className","otherProps","objectWithoutProperties","react_default","a","createElement","ref","node","style","assign","objectSpread","PureComponent","WaterFall","onLayoutComplete","items","onLayout","msnry","renderItem","dataSource","render","columnWidth","gutter","itemStyle","renderFunc","item","marginBottom","map","index","_this$props2","horizontalOrder","percentPosition","fitWidth","getInstance","Masonry","itemSelector","on","prevProps","prevState","isEqual","layout","off","destroy","_this$props3","prefixCls","classnames","cx","defaultProps","LazyLoad","componentDidUpdate","lazySizes","hC","aC","nextProps","propsChanged","_arr","_i","propName","handleSrcSet","rC","dataSrcSet","isArray","join","src","e","target","classList","add","dataSizes","dataSrc","iframe","title","alt","classNames","lazyProps","frameBorder","onError","Component","Content","Meta","Lessons","connect","_ref","lessons","loading","models","visible","allCourse","lessonSource","onClose","removeStore","getAllCourseNames","self","document","addEventListener","_ref2","water","dispatch","type","afterResponse","resp","data","payload","valueField","method","url","getStore","userRoleName","courseNames","layout_default","components_WaterFall","card_default","hoverable","cover","components_LazyLoad","imgUrl","onClick","_","setStore","history","replace","description","courseName","BaseComponent"],"mappings":"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","file":"static/js/10.95992cea.chunk.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport ResizeSensor from 'css-element-queries/src/ResizeSensor';\nimport $$ from 'cmn-utils';\nconst {debounce, throttle} = $$;\n\n/**\n * 在一个类上增加这个装饰器，可以监听组件的大小变化，\n * 被包装的类在porps中将注入组件的width和height，并且\n * 在上级函组件中可以使用onResize函数\n * @param {*} config\n */\nconst defaultConfig = {\n  refreshRate: 16, // 调用频率\n  refreshMode: 'throttle', // 使用函数，只能是节流或防抖函数[throttle | debounce]\n}\n\nconst resizeMe = (config = defaultConfig) => {\n  const refreshFunc = config.refreshMode === 'throttle' ? throttle : debounce;\n\n  return WrappedComponent => {\n    return class extends PureComponent {\n      constructor(props) {\n        super(props);\n        this.onResizeStrategy = refreshFunc(this.onResize, config.refreshRate);\n        this.state = {\n          width: undefined,\n          height: undefined,\n          position: undefined,\n        }\n      }\n\n      componentDidMount() {\n        const element = this.element.parentNode;\n        this.resizeSensor = new ResizeSensor(element, this.onResizeStrategy);\n        this.onResizeStrategy();\n      }\n    \n      componentWillUnmount() {\n        const element = this.element.parentNode;\n        this.resizeSensor.detach(element, this.onResizeStrategy);\n      }\n    \n      onResize = () => {\n        const element = this.element.parentNode;\n        const { onResize } = this.props;\n        const { width, height, paddingLeft, paddingRight, paddingTop, paddingBottom } = getComputedStyle(element);\n        \n        const size = {\n          width: parseInt(width, 10) - parseInt(paddingLeft, 10) - parseInt(paddingRight, 10),\n          height: parseInt(height, 10) - parseInt(paddingTop, 10) - parseInt(paddingBottom, 10),\n        }\n        this.setState(size);\n\n        onResize && onResize(size);\n      }\n      \n      render() {\n        const { width, height } = this.state;\n        const { className, ...otherProps } = this.props;\n        const styles = {\n          position: 'relative',\n          width: '100%',\n          height: '100%',\n        }\n        return (\n          <div ref={node => this.element = node} style={styles} className={className}>\n            {width && height ? (\n              <WrappedComponent {...otherProps} size={{...this.state}} />\n            ) : null}\n          </div>\n        );\n      }\n    };\n  };\n}\n\nexport default resizeMe;\n","import WaterFall from './WaterFall';\n\nexport default WaterFall;","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport Masonry from 'masonry-layout';\nimport cx from 'classnames';\nimport resizeMe from '@/decorator/resizeMe';\nimport isEqual from 'react-fast-compare';\nimport './style/index.less';\n\n@resizeMe({ refreshRate: 50 })\nclass WaterFall extends PureComponent {\n  static propTypes = {\n    dataSource: PropTypes.array,\n    columnWidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    gutter: PropTypes.number,\n    horizontalOrder: PropTypes.bool,\n    percentPosition: PropTypes.bool,\n    fitWidth: PropTypes.bool\n  };\n  static defaultProps = {\n    prefixCls: 'antui-waterfall'\n  };\n\n  componentDidMount() {\n    const {\n      columnWidth,\n      gutter,\n      horizontalOrder,\n      percentPosition,\n      fitWidth,\n      getInstance\n    } = this.props;\n\n    this.msnry = new Masonry(this.node, {\n      itemSelector: '.antui-waterfall-item',\n      columnWidth:\n        typeof columnWidth === 'string' ? '.antui-waterfall-item' : columnWidth,\n      gutter,\n      horizontalOrder,\n      percentPosition,\n      fitWidth\n    });\n\n    this.msnry.on('layoutComplete', this.onLayoutComplete);\n\n    if (getInstance) getInstance(this.msnry);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (!isEqual(prevProps.size, this.props.size)) {\n      this.msnry.layout();\n    }\n  }\n\n  componentWillUnmount() {\n    this.msnry.off('layoutComplete', this.onLayoutComplete);\n    this.msnry.destroy();\n  }\n\n  onLayoutComplete = items => {\n    const { onLayout } = this.props;\n    onLayout && onLayout(items, this.msnry);\n  }\n\n  renderItem = dataSource => {\n    const { render, columnWidth, gutter, itemStyle } = this.props;\n    const renderFunc = render ? render : item => item;\n\n    const style = {\n      width: columnWidth\n    };\n    if (gutter) {\n      style.marginBottom = gutter;\n    }\n\n    return dataSource.map((item, index) => {\n      return (\n        <div\n          key={index}\n          className=\"antui-waterfall-item\"\n          style={{ ...style, ...itemStyle }}\n        >\n          {renderFunc(item, index)}\n        </div>\n      );\n    });\n  };\n\n  render() {\n    const { prefixCls, className, dataSource, style } = this.props;\n    const classnames = cx(prefixCls, className);\n    return (\n      <div\n        ref={node => (this.node = node)}\n        className={classnames}\n        style={style}\n      >\n        {this.renderItem(dataSource)}\n      </div>\n    );\n  }\n}\n\nexport default WaterFall;\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport lazySizes from 'lazysizes';\r\nimport cx from 'classnames';\r\nimport $$ from 'cmn-utils';\r\nimport './style/index.less';\r\n\r\nclass LazyLoad extends Component {\r\n  static propTypes = {\r\n    src: PropTypes.string,\r\n    dataSizes: PropTypes.string,\r\n    dataSrc: PropTypes.string,\r\n    dataSrcSet: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\r\n    className: PropTypes.string,\r\n    iframe: PropTypes.bool\r\n  };\r\n\r\n  static defaultProps = {\r\n    src:\r\n      'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\r\n    dataSizes: 'auto',\r\n    iframe: false,\r\n    prefixCls: 'antui-lazyload'\r\n  };\r\n\r\n  componentWillUpdate(nextProps) {\r\n    let propsChanged = false;\r\n    for (let propName of [\r\n      'src',\r\n      'dataSizes',\r\n      'dataSrc',\r\n      'dataSrcSet',\r\n      'className',\r\n      'iframe'\r\n    ]) {\r\n      let prop =\r\n        propName === 'dataSrcSet'\r\n          ? this.handleSrcSet(this.props[propName])\r\n          : this.props[propName];\r\n      let nextProp =\r\n        propName === 'dataSrcSet'\r\n          ? this.handleSrcSet(nextProps[propName])\r\n          : nextProps[propName];\r\n      if (prop !== nextProp) {\r\n        propsChanged = true;\r\n        break;\r\n      }\r\n    }\r\n    if (propsChanged && lazySizes) {\r\n      if (lazySizes.hC(this.node, 'lazyloaded')) {\r\n        lazySizes.rC(this.node, 'lazyloaded');\r\n      }\r\n    }\r\n  }\r\n\r\n  handleSrcSet(dataSrcSet) {\r\n    if ($$.isArray(dataSrcSet)) {\r\n      return dataSrcSet.join(',');\r\n    } else if (typeof dataSrcSet === 'string') {\r\n      return dataSrcSet;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  componentDidUpdate = () => {\r\n    if (!lazySizes) {\r\n      return;\r\n    }\r\n    if (\r\n      !lazySizes.hC(this.node, 'lazyloaded') &&\r\n      !lazySizes.hC(this.node, 'lazyload')\r\n    ) {\r\n      lazySizes.aC(this.node, 'lazyload');\r\n    }\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.node.src = '';\r\n  }\r\n\r\n  onError(e) {\r\n    e.target.classList.add('lazyerror');\r\n    e.target.src =\r\n      'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      prefixCls,\r\n      src,\r\n      dataSizes,\r\n      dataSrc,\r\n      dataSrcSet,\r\n      className,\r\n      iframe,\r\n      title,\r\n      alt,\r\n      ...otherProps\r\n    } = this.props;\r\n\r\n    const classNames = cx(prefixCls, 'lazyload', className);\r\n\r\n    const lazyProps = { ...otherProps, src };\r\n    if (dataSrc) lazyProps['data-src'] = dataSrc;\r\n    if (dataSizes) lazyProps['data-sizes'] = dataSizes;\r\n    if (dataSrcSet) {\r\n      lazyProps['data-srcset'] = this.handleSrcSet(dataSrcSet);\r\n    }\r\n\r\n    if (iframe) {\r\n      return (\r\n        <iframe\r\n          ref={node => (this.node = node)}\r\n          className={classNames}\r\n          title={title}\r\n          frameBorder=\"0\"\r\n          {...lazyProps}\r\n        />\r\n      );\r\n    }\r\n    return (\r\n      <img\r\n        ref={node => (this.node = node)}\r\n        className={classNames}\r\n        alt={alt}\r\n        onError={this.onError}\r\n        {...lazyProps}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default LazyLoad;\r\n","import LazyLoad from './LazyLoad';\n\nexport default LazyLoad;","import React from 'react';\r\nimport WaterFall from 'components/WaterFall';\r\nimport LazyLoad from 'components/LazyLoad';\r\nimport {Layout, Card} from 'antd';\r\nimport BaseComponent from 'components/BaseComponent';\r\nimport './index.less';\r\nimport {connect} from \"dva\";\r\nimport $$ from \"cmn-utils\"\r\n\r\nconst {Content} = Layout;\r\nconst {Meta} = Card;\r\n\r\n@connect(({lessons, loading}) => ({\r\n  lessons,\r\n  loading: loading.models.lessons\r\n}))\r\nexport default class Lessons extends BaseComponent {\r\n  state = {\r\n    dataSrc: '',\r\n    visible: false,\r\n    allCourse: [],\r\n    lessonSource: [],\r\n  }\r\n\r\n  componentDidMount() {\r\n    $$.removeStore('lessonItem')\r\n    this.getAllCourseNames()\r\n    const self = this;\r\n    document.addEventListener('lazybeforeunveil', ({target}) => {\r\n      self.water.layout();\r\n    });\r\n  }\r\n\r\n  //获取所有的课程名称\r\n  getAllCourseNames() {\r\n    const {dispatch, lessons} = this.props\r\n    const resUrl = ($$.getStore('user').userRoleName === \"学生\")\r\n      ? 'http://59.67.107.169:8010/api/student/allCourseSelect'\r\n      : 'http://59.67.107.169:8010/api/teacher/allCourseSelect'\r\n    dispatch({\r\n      type: 'lessons/@request',\r\n      afterResponse: resp => resp.data,\r\n      payload: {\r\n        valueField: 'courseNames',\r\n        method: 'GET',\r\n        url: resUrl\r\n      }\r\n    });\r\n  }\r\n\r\n  onClose = () => {\r\n    this.setState({\r\n      visible: false\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {courseNames} = this.props.lessons;\r\n    return (\r\n      <Layout className=\"full-layout page lessons-page\">\r\n        <Content>\r\n          <WaterFall\r\n            ref=\"waterFall\"\r\n            className=\"gallery-water-fall\"\r\n            dataSource={courseNames}\r\n            columnWidth={240}\r\n            fitWidth\r\n            gutter={16}\r\n            getInstance={water => (this.water = water)}\r\n            render={item => (\r\n              <Card\r\n                hoverable\r\n                cover={\r\n                  <LazyLoad\r\n                    dataSrc={item.imgUrl}\r\n                    onClick={\r\n                      _ => {\r\n                        this.props.dispatch({\r\n                          type: 'lessons/change',\r\n                          payload: {item}\r\n                        })\r\n                        $$.setStore('lessonItem', item);\r\n                        this.history.replace(`/column/intro/`)\r\n                      }}\r\n                  />\r\n                }\r\n              >\r\n                <Meta\r\n                  // title={item.courseName}\r\n                  description={item.courseName}\r\n                />\r\n              </Card>\r\n            )}\r\n          />\r\n        </Content>\r\n      </Layout>\r\n    );\r\n  }\r\n}"],"sourceRoot":""}