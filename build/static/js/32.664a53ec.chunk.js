(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1315:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return J});a(767);var n,o=a(769),i=a.n(o),r=(a(878),a(879)),l=a.n(r),c=(a(349),a(234)),s=a.n(c),m=(a(171),a(49)),u=a.n(m),p=(a(339),a(38)),d=a.n(p),h=(a(749),a(750)),g=a.n(h),b=a(14),f=a(15),y=a(24),v=a(22),E=a(23),C=a(129),I=(a(112),a(113)),S=a.n(I),O=(a(796),a(797)),j=a.n(O),w=(a(338),a(784)),k=a.n(w),x=(a(78),a(31)),T=a.n(x),M=a(0),q=a.n(M),z=a(69),U=a(219),B=a(226),D=a(10),L=a.n(D),N=T.a.Header,R=T.a.Content,A=k.a.TextArea,H=function(e){var t=e.onChange,a=e.onSubmit,n=e.submitting,o=e.value;return q.a.createElement("div",null,q.a.createElement(j.a.Item,null,q.a.createElement(A,{rows:4,onChange:t,value:o})),q.a.createElement(j.a.Item,null,q.a.createElement(S.a,{htmlType:"submit",loading:n,onClick:a,type:"primary",style:{float:"right"}},"\u6dfb\u52a0\u7559\u8a00")))},J=Object(z.connect)(function(e){return{topicIntro:e.topicIntro,loading:e.loading.models.topicIntro}})(n=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={visible:!1,comments:[],submitting:!1,value:"",isMobile:!1},a.componentDidMount=function(){a.getOneComment(),a.judgeIsMobile()},a.judgeIsMobile=function(){a.unregisterEnquire=Object(B.a)(function(e){a.state.isMobile!==e&&a.setState({isMobile:e})})},a.getOneComment=function(){a.props.dispatch({type:"topicIntro/@request",afterResponse:function(e){return e.data},payload:{valueField:"topicDetail",method:"GET",url:"http://59.67.107.169:8010/api/topic/queryTopic/".concat(L.a.getStore("topicId"))}})},a.addComment=function(){a.props.dispatch({type:"topicIntro/@request",afterResponse:function(e){"success"===e.icon?g.a.success(e.message):g.a.erro(e.message)},payload:{method:"POST",url:"http://59.67.107.169:8010/api/reply/publicReply",data:{replyTopicId:L.a.getStore("topicId"),replyUserId:L.a.getStore("user").userId,replyContent:a.state.value}}})},a.goBack=function(){a.history.push(L.a.getStore("beforeUrl"))},a.replyComment=function(){a.setState({visible:!0})},a.closeComment=function(){a.setState({visible:!1})},a.handleSubmit=function(){a.state.value&&(a.setState({submitting:!0}),a.addComment(),setTimeout(function(){a.setState({submitting:!1,value:""}),a.getOneComment(),a.closeComment(Object(C.a)(Object(C.a)(a)))},1e3))},a.handleChange=function(e){a.setState({value:e.target.value})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state,t=e.visible,a=(e.comments,e.submitting),n=e.value,o=e.isMobile,r=this.props.topicIntro.topicDetail;return q.a.createElement(T.a,{className:"full-layout topic-intro-page"},q.a.createElement(N,{style:{color:"black"}},q.a.createElement(u.a,{theme:"dark",mode:"horizontal",style:{lineHeight:"64px"}},q.a.createElement(u.a.Item,null,q.a.createElement("div",{onClick:this.goBack},q.a.createElement(d.a,{type:"arrow-left",style:o?{color:"white",fontSize:"25px"}:{color:"white",fontSize:"25px",marginLeft:"50px",marginTop:"10px"}}),"\u8fd4\u56de\u8bc4\u8bba\u4e3b\u9875")))),q.a.createElement(R,{style:{padding:"20px 50px"}},q.a.createElement(l.a,{className:"comment-topic",actions:[q.a.createElement("div",{onClick:this.replyComment},"\u56de\u590d")],author:r.topicUserId,avatar:q.a.createElement(s.a,{src:r.userImg}),content:r.topicContent,datetime:r.topicCreatedTime},q.a.createElement("div",null,q.a.createElement(i.a,{dataSource:r.replyList,itemLayout:"horizontal",className:"comment-list",renderItem:function(e){return q.a.createElement(l.a,{author:e.replyUserId,avatar:q.a.createElement(s.a,{src:e.userImg}),content:e.replyContent,datetime:e.replyCreatedTime,style:{borderBottom:"1px solid #e2e2e2"}})}}),t&&q.a.createElement(l.a,{avatar:q.a.createElement(s.a,{src:"http://localhost:8010/file/icon1.jpeg",alt:"Shang Yuxiu"}),content:q.a.createElement(H,{onChange:this.handleChange,onSubmit:this.handleSubmit,submitting:a,value:n})})))))}}]),t}(U.a))||n}}]);
//# sourceMappingURL=32.664a53ec.chunk.js.map